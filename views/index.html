<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Club Campestre Bot</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
        .container { max-width: 700px; margin: 50px auto; background: #fff; padding: 20px; border-radius: 10px; }
        h1 { text-align: center; color: #2c3e50; }
        form { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        input { padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
        button { padding: 10px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
        button#activar { background: #27ae60; color: #fff; }
        button#pausar { background: #c0392b; color: #fff; }
        .logs { max-height: 300px; overflow-y: auto; background: #ecf0f1; padding: 10px; border-radius: 5px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bot de Reservas</h1>
        <form id="botForm">
            <input type="text" id="user" placeholder="Usuario" required>
            <input type="password" id="password" placeholder="ContraseÃ±a" required>
            <input type="text" id="telefono" placeholder="WhatsApp Destino" required>
            <button type="button" id="activar">Activar Bot</button>
            <button type="button" id="pausar">Pausar Bot</button>
        </form>
        <h2>Logs <span id="status">(Inactivo)</span></h2>
        <div class="logs" id="logs"></div>
    </div>

    <script>
        const logsDiv = document.getElementById('logs');
        const statusSpan = document.getElementById('status');

        async function updateLogs() {
            const res = await fetch('/logs');
            const data = await res.json();
            logsDiv.innerHTML = data.logs.map(l => `<p>${l}</p>`).join('');
            statusSpan.textContent = data.bot_active ? "Activo" : "Inactivo";
        }

        setInterval(updateLogs, 1000);

        document.getElementById('activar').addEventListener('click', async () => {
            const user = document.getElementById('user').value;
            const password = document.getElementById('password').value;
            const telefono = document.getElementById('telefono').value;

            await fetch('/bot', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'activar', user, password, telefono })
            });
        });

        document.getElementById('pausar').addEventListener('click', async () => {
            await fetch('/bot', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: 'pausar' })
            });
        });

        updateLogs();
    </script>
</body>
</html>
